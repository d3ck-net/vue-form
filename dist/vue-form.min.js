/*!
 * vue-form v0.3.12
 * Released under the MIT License.
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.VueForm=e()}(this,function(){function warn(t){"undefined"!=typeof console&&debug&&console.warn("[VueForm warn]: "+t)}function isString(t){return"string"==typeof t}function isObject(t){return null!==t&&"object"==typeof t}function isUndefined(t){return void 0===t}function on(t,e,i,n){t.addEventListener(e,i,n)}function off(t,e,i,n){t.removeEventListener(e,i,n)}function attr(t,e){return t?t.getAttribute(e):null}function trigger(t,e){var i=document.createEvent("HTMLEvents");i.initEvent(e,!0,!1),t.dispatchEvent(i)}function getFromPath(t,e){for(var i=t.split("."),n=0;n<i.length;n++){var a=i[n];if(void 0===e)break;e=e[a]}return e}function setFromPath(t,e,i){for(var n=t.split(".");n.length>1;){var a=n.shift();"object"!=typeof i[a]&&set(i,a,{}),i=i[a]}set(i,n[0],e)}function camelize(t){return util.camelize(t)}function pull(t,e){t.splice(t.indexOf(e),1)}function each(t,e){var i,n;if("number"==typeof t.length)for(i=0;i<t.length;i++)e.call(t[i],t[i],i);else if(isObject(t))for(n in t)t.hasOwnProperty(n)&&e.call(t[n],t[n],n);return t}function required(t,e){return"boolean"!=typeof e&&(e=!0),"boolean"==typeof t?!e||t:!e||!(null===t||0===t.length)}function numeric(t){return/^[-+]?[0-9]+$/.test(t)}function integer(t){return/^(?:[-+]?(?:0|[1-9][0-9]*))$/.test(t)}function float(t){return/^(?:[-+]?(?:[0-9]+))?(?:\.[0-9]*)?(?:[eE][\+\-]?(?:[0-9]+))?$/.test(t)}function alpha(t){return/^([A-Z]+)?$/i.test(t)}function alphanum(t){return/^([0-9A-Z]+)?$/i.test(t)}function email(t){return/^([a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*)?$/i.test(t||"a@a.aa")}function url(t){return/^((ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?)?$/.test(t)}function minlength(t,e){return t&&t.length&&t.length>=+e}function maxlength(t,e){return t&&t.length&&t.length<=+e}function length(t){return t&&t.length==+arg}function min(t,e){return t>=+e}function max(t,e){return t<=+e}function pattern(t,e){var i=e.match(new RegExp("^/(.*?)/([gimy]*)$"));return new RegExp(i[1],i[2]).test(t)}function Filter(t){return function(e){e.preventDefault(),Validator.validate(e.target,!0)&&t(e)}}function plugin(t){plugin.installed||(Util(t),t.fields=fields,t.component("fields",Fields(t)),t.validator=Validator,t.filter("valid",Filter),t.directive("validator",Directive),t.directive("validate",Validate),t.vueForm={useLegacyCode:1===parseInt(t.version)},t.vueForm.useLegacyCode&&console.warn("vue-form runs in legacy Vue 1.x mode"),t.config.optionMergeStrategies.fields=t.config.optionMergeStrategies.props)}var debug=!1,util={},set,isArray=Array.isArray,Util=function(t){set=t.set,util=t.util,debug=t.config.debug||!t.config.silent},assign=Object.assign||function(t){for(var e=arguments,i=1;i<arguments.length;i++){var n=e[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Field={name:"field",props:["field","class"],data:function(){return assign({name:"",type:"text",label:"",attrs:{},options:[],default:void 0},this.field)},computed:{filteredOptions:function(){return this.filterOptions(this.$data.options)},attributes:{get:function(){return this.enable&&!this.$parent.evaluate(this.enable)?assign({disabled:"true"},this.attrs):this.attrs}},value:{get:function(){var t=this.$parent.getField(this);return isUndefined(t)&&!isUndefined(this.default)&&(t=this.default)&&this.$parent.setField(this,t),t},set:function(t){isUndefined(this.value)&&!t||this.$parent.setField(this,t,this.value)}}},methods:{filterOptions:function(t){var e=this,i=[];return t?(each(t,function(t,n){isObject(t)?i.push({label:n,options:e.filterOptions(t)}):i.push({text:n,value:t})}),i):(warn("Invalid options provided for "+this.name),i)}}},template='<div>\n\n    <div v-for="field in fields">\n        <label v-if="field.type != \'checkbox\'">{{ field.label }}</label>\n        <component :is="prefix + field.type" :field="field"></component>\n    </div>\n\n</div>\n',evaluator=function(expression){try{var res=eval("with(this){ "+expression+" } ");return res}catch(t){return void(Vue.config.silent||console.warn(t))}},Fields=function(t){return{name:"fields",props:{config:{type:[Array,Object],default:function(){return[]}},values:{type:Object},prefix:{type:String,default:""}},created:function(){var e=this,i=this.$options,n=i.fields,a=i.components;this.fields&&this.values?each(assign({},t.fields,n),function(i,n){if(isString(i)&&(i={template:i}),isObject(i)&&(i.name=i.name||"field-"+n,i=t.extend(Field).extend(i)),!t.vueForm.useLegacyCode&&!e.prefix&&t.config.isReservedTag(n))throw'field type: "'+n+'" is a reserved HTML tag name in Vue 2.x';a[e.prefix+n]=i}):warn("Invalid config or model provided")},computed:{fields:function(){return this.filterFields(this.config)}},methods:{getField:function(e){return this.values instanceof t&&"getField"in this.values?this.values.getField(e):getFromPath(e.name,this.values)},setField:function(e,i,n){this.values instanceof t&&"setField"in this.values?this.values.setField(e,i,n):setFromPath(e.name,i,this.values)},filterFields:function(t){var e=this,i=isArray(t),n=[];return each(t,function(t,a){isString(t.name)||i||(t.name=a),isString(t.type)||(t.type="text"),isString(t.name)?t.show&&!e.evaluate(t.show)||n.push(t):warn("Field name missing "+JSON.stringify(t))}),n},evaluator:function(){},evaluate:function(e,i){if(i=i||this.values,isString(e)){var n=new t({data:i}),a=evaluator.call(n,e);return n.$destroy(),a}return e.call(this,i,this)}},fields:{},components:{},template:template}},fields={text:'<input type="text" v-bind="attributes" v-model="value">',textarea:'<textarea v-bind="attributes" v-model="value"></textarea>',radio:'<template v-for="option in filteredOptions">\n                    <input type="radio" v-bind="attributes" :name="name" :value="option.value" v-model="value"> <label>{{ option.text }}</label>\n                 </template>',checkbox:'<input type="checkbox" v-bind="attributes" v-model="value">',select:'<select v-bind="attributes" v-model="value">\n                     <template v-for="option in filteredOptions">\n                         <optgroup :label="option.label" v-if="option.label">\n                             <option v-for="opt in option.options" :value="opt.value">{{ opt.text }}</option>\n                         </optgroup>\n                         <option :value="option.value" v-else>{{ option.text }}</option>\n                     </template>\n                 </select>',range:'<input type="range" v-bind="attributes" v-model="value">',number:'<input type="number" v-bind="attributes" v-model="value">'},types=Object.freeze({required:required,numeric:numeric,integer:integer,float:float,alpha:alpha,alphanum:alphanum,email:email,url:url,minlength:minlength,maxlength:maxlength,length:length,min:min,max:max,pattern:pattern}),Validator={dirs:[],types:types,add:function(t){this.dirs.push(t)},remove:function(t){pull(this.dirs,t)},instance:function(t){do{if(t._validator)return t._validator;t=t.parentElement}while(t)},validate:function(t,e){var i=this,n=this.instance(t),a={valid:!0};if(n)return this.dirs.forEach(function(t){var r=t.validate(),l=t.el,o=t.name;i.instance(l)===n&&(!l._touched&&e&&(l._touched=!0),l._touched||r||(r=!0,a.valid=!1),a[o]||(a[o]={valid:!0,invalid:!1,dirty:l._dirty,touched:l._touched}),a[o][t.type]=!r,e&&a.valid&&!r&&l.focus(),a[o].valid&&!r&&(a[o].valid=!1,a[o].invalid=!0,a.valid=!1))}),a.invalid=!a.valid,n.results(a),e&&a.invalid&&trigger(n.el,"invalid"),a.valid}},Directive={bind:function(){var t=this,e=this.arg||this.expression;this.name=camelize(e),this.el._validator=this,this.vm.$set(this.name),this.vm.$on("hook:compiled",function(){Validator.validate(t.el)})},unbind:function(){this.vm.$delete(this.name)},results:function(t){this.vm.$set(this.name,assign({validate:this.validate.bind(this)},t))},validate:function(){return Validator.validate(this.el,!0)}},Validate={priority:500,bind:function(){var t=attr(this.el,"name");t&&(this.name=camelize(t),this.type=this.arg,this.value=this.el.value,this.el._dirty=!1,this.el._touched=!1,on(this.el,"blur",this.listener.bind(this)),on(this.el,"input",this.listener.bind(this)),Validator.add(this))},unbind:function(){off(this.el,"blur",this.listener),off(this.el,"input",this.listener),Validator.remove(this)},update:function(t){this.args=t},listener:function(t){(!related.target||"A"!==related.target.tagName&&"BUTTON"!==related.target.tagName)&&("blur"==t.type&&(this.el._touched=!0),this.el.value!=this.value&&(this.el._dirty=!0),Validator.validate(this.el))},validate:function(){var t=this.validator();if(t)return t.call(this.vm,this.el.value,this.args)},validator:function(){var t,e=this,i=this.vm;do{if((t=i.$options.validators||{})[e.type])return t[e.type];i=i.$parent}while(i);return Validator.types[this.type]}},related={target:null,handler:function(t){var e=t.target;related.target=e,setTimeout(function(){return related.target=null},0)}};return on(document,"mousedown",related.handler),on(document,"pointerdown",related.handler),on(document,"touchstart",related.handler),"undefined"!=typeof window&&window.Vue&&window.Vue.use(plugin),plugin});